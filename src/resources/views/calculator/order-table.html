<template>
    <require from="./event-view"></require>

    <div class="two fields">
        <div class="ui field toggle checkbox">
            <input type="checkbox" name="root-in-prop-zone" id="root-in-prop-zone" checked.bind="calculator.rootInPropagationZone">
            <label for="root-in-prop-zone">Root in B/C</label>
        </div>
        <div class="ui field toggle checkbox">
            <input type="checkbox" name="partial-space" id="partial-space" checked.bind="calculator.partialSpace">
            <label for="partial-space">Use partial spacing</label>
        </div>
    </div>

    <table class="ui table">
        <thead>
            <tr>
                <th class="center aligned">Event</th>
                <th class="center aligned">Week</th>
                <th class="center aligned">Tables</th>
                <th class="center aligned" repeat.for="z of calculator.zones">${z.name}</th>
            </tr>
        </thead>
        <tbody>
            <tr repeat.for="week of calculator.weeks">
                <td>
                    <div class="ui ribbon label" if.bind="week.events.length">
                        <event-view repeat.for="event of week.events" event.bind="event" calculator.bind="calculator"></event-view>
                    </div>
                </td>
                <td class="center aligned">${week.week.week}</td>
                <td class="center aligned">${week.tables|numericFormat}</td>
                <td class="center aligned ${week.zones[z].available < 0 ? 'negative' : 'positive'}" repeat.for="z of week.zones | keys">
                    ${week.zones[z].available}
                </td>
            </tr>
            <tr show.bind="calculator.order.stickDate">
                <td colspan="3">&nbsp;</td>
                <td class="center aligned" repeat.for="zone of calculator.zones">
                    <button click.trigger="createOrder(zone)" class="basic ui icon button" hide.bind="zone.isPropagationZone">
                        <i class="checkmark box icon" show.bind="zone.canFit"></i>
                        <i class="warning sign box icon" hide.bind="zone.canFit"></i>
                    </button>
                    <span show.bind="zone.isPropagationZone">&nbsp;</span>
                </td>
            </tr>
        </tbody>
    </table>
</template>